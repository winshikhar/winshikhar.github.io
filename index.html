<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dr. Shikhar Bhardwaj (Ph.D.) â€” AI/ML/GenAI, DevOps Engineer & Researcher</title>
  <meta name="description" content="PhD researcher and engineer specializing in on-prem GenAI, RAG, edge ML, IoT/SDN, and secure infrastructure automation." />

  <!-- Favicons -->
  <link id="favicon" rel="icon" href="favicon-dark.ico" />
  <link rel="icon" href="favicon-light.ico" media="(prefers-color-scheme: light)" />
  <link rel="icon" href="favicon-dark.ico" media="(prefers-color-scheme: dark)" />

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V9SPS7G');</script>
  <!-- End Google Tag Manager -->

  <style media="print">
    * { -webkit-print-color-adjust: exact !important; color-adjust: exact !important; box-shadow: none !important; }
    body { background: white !important; color: black !important; }
    .card, .container, header, .tab, .chip, canvas {
      background: white !important; border: 1px solid #ccc !important; color: black !important;
    }
    .muted, ul, .chip, .inline-contact { color: #555 !important; }
    a { color: #007bff !important; text-decoration: underline !important; }
    canvas, .knfl .playground, .knfl .roll, .knfl .score { display: none !important; }
    .tabs { display: none; }
    [role="tabpanel"] { display: block !important; }
    section { page-break-after: always; }
  </style>

  <style>
    :root {
      --bg: #0f1724;
      --panel: #0b1220;
      --muted: #94a3b8;
      --card: #071025;
      --accent: #7c3aed;
      --accent-2: #06b6d4;
      --glass: rgba(255,255,255,0.03);
      --radius: 12px;
      --maxwidth: 1100px;
      --mono: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --bp-md: 920px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    @media (prefers-reduced-motion: reduce) {
      :root { transition: none; }
    }
    [data-theme="light"] {
      --bg: #ffffff;
      --panel: #f8fafc;
      --muted: #64748b;
      --card: #f1f5f9;
      --glass: rgba(0,0,0,0.03);
      color-scheme: light;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: var(--mono);
      background: linear-gradient(180deg, var(--bg) 0%, var(--panel) 60%);
      color: var(--text-color, #e6eef6);
      transition: background 0.3s ease, color 0.3s ease;
    }
    [data-theme="light"] body {
      background: linear-gradient(180deg, #ffffff 0%, #f8fafc 60%);
      color: #1e293b;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container {
      max-width: var(--maxwidth);
      margin: 20px auto;
      padding: 20px;
      position: relative;
    }
    header {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    .brand { font-weight: 800; font-size: 1.8rem; }
    .tagline { color: var(--muted); font-size: 0.95rem; margin-top: 4px; }
    .inline-contact {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }
    .inline-contact a { color: var(--muted); text-decoration: none; }
    .inline-contact a:hover { color: var(--accent); }
    [data-theme="light"] .inline-contact a { color: #64748b; }

    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.04);
      border-radius: 20px;
      padding: 6px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--muted);
      cursor: pointer;
      z-index: 10;
    }
    .theme-toggle:hover { background: rgba(255,255,255,0.06); }
    [data-theme="light"] .theme-toggle {
      background: rgba(0,0,0,0.03);
      border-color: rgba(0,0,0,0.1);
      color: #64748b;
    }
    [data-theme="light"] .theme-toggle:hover { background: rgba(0,0,0,0.06); }

    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px 0 16px;
    }
    .tab {
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.04);
      padding: 8px 14px;
      border-radius: 10px;
      color: var(--muted);
      cursor: pointer;
      white-space: nowrap;
      font-size: 0.92rem;
      transition: all 0.2s ease;
    }
    [data-theme="light"] .tab {
      background: rgba(0,0,0,0.02);
      border-color: rgba(0,0,0,0.1);
      color: #64748b;
    }
    .tab[aria-selected="true"] {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }
    [data-theme="light"] .tab[aria-selected="true"] {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    main.card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    [data-theme="light"] main.card {
      background: #fff;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      color: #1e293b;
    }

    h1, h2, h3 {
      margin: 0 0 12px 0;
      font-weight: 700;
    }
    [data-theme="light"] h1,
    [data-theme="light"] h2,
    [data-theme="light"] h3 {
      color: #0f172a;
    }

    .muted { color: var(--muted); }
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 24px;
    }
    @media (max-width: 920px) {
      .grid-2 { grid-template-columns: 1fr; }
    }

    ul {
      margin: 8px 0 16px 24px;
      padding-left: 4px;
      color: #dbeafe;
    }
    [data-theme="light"] ul { color: #475569; }
    li { margin-bottom: 8px; line-height: 1.5; }

    .skills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0;
    }
    .chip {
      background: rgba(255,255,255,0.02);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.82rem;
    }
    [data-theme="light"] .chip {
      background: rgba(0,0,0,0.03);
      color: #475569;
    }

    .project-card, .blog-post {
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.03);
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 16px;
    }
    [data-theme="light"] .project-card,
    [data-theme="light"] .blog-post {
      background: #f8fafc;
      border-color: rgba(0,0,0,0.05);
    }
    .project-title, .blog-title {
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--accent);
    }

    /* Accordion */
    .accordion {
      margin-top: 12px;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.03);
    }
    [data-theme="light"] .accordion {
      border-color: rgba(0,0,0,0.1);
    }
    .acc-item { border-bottom: 1px solid rgba(255,255,255,0.02); }
    [data-theme="light"] .acc-item { border-bottom-color: rgba(0,0,0,0.05); }
    .acc-h {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      cursor: pointer;
    }
    [data-theme="light"] .acc-h {
      background: linear-gradient(180deg, rgba(0,0,0,0.01), rgba(0,0,0,0.005));
    }
    .acc-title { 
      font-weight: 600; 
      font-size: 0.95rem;
      flex: 1;
      text-align: left;
    }
    .acc-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-weight: 700;
      cursor: pointer;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-left: 12px;
    }
    .acc-panel {
      padding: 12px 14px;
      background: transparent;
      color: #cfe8ff;
      display: none;
    }
    [data-theme="light"] .acc-panel { color: #475569; }
    .acc-panel.show { display: block; }

    .pub-title {
      font-weight: 700;
      margin-bottom: 4px;
      font-size: 1.05rem;
    }
    .pub-authors {
      font-style: italic;
      color: var(--muted);
      font-size: 0.95rem;
      margin-bottom: 4px;
    }
    [data-theme="light"] .pub-authors {
      color: #64748b;
    }
    .pub-venue {
      font-size: 0.9rem;
      margin-top: 4px;
      color: var(--muted);
    }
    [data-theme="light"] .pub-venue {
      color: #64748b;
    }
    .pub-link {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 12px;
      background: var(--glass);
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    .pub-link:hover {
      background: rgba(124, 58, 237, 0.2);
    }
    [data-theme="light"] .pub-link:hover {
      background: rgba(124, 58, 237, 0.1);
    }

    .knfl .playground {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .knfl .dice {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: white;
      color: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      border: 2px solid rgba(0,0,0,0.06);
    }
    .knfl .roll {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      padding: 10px 16px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: 700;
    }
    .knfl-score {
      margin-top: 12px;
      display: block;
    }

    #resumeViewer {
      width: 100%;
      height: 70vh;
      border: none;
      border-radius: 8px;
    }
    .pdf-loading {
      text-align: center;
      padding: 20px;
      color: var(--muted);
    }

    #gameCanvas {
      width: 100%;
      height: 50vh;
      border-radius: 8px;
      display: block;
    }

    .tab:focus,
    .knfl .roll:focus,
    .theme-toggle:focus,
    .acc-btn:focus,
    .acc-h:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      border-radius: 8px;
    }
    
    /* Loading indicator */
    .loader {
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top: 3px solid var(--accent);
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- GTM (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V9SPS7G"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <div class="container" id="app">
    <header>
      <div>
        <div class="brand">Dr. Shikhar Bhardwaj</div>
        <div class="tagline">PhD Â· AI/ML/GenAI, DevOps Engineer & Researcher</div>
        <div class="inline-contact">
          <span>Noida, India (IST)</span> â€¢
          <a href="mailto:winshikhar@gmail.com" data-gtm-event="outbound_click" data-gtm-label="email">winshikhar@gmail.com</a> â€¢
          <a href="https://linkedin.com/in/b-shikhar/" target="_blank" rel="noopener noreferrer" data-gtm-event="outbound_click" data-gtm-label="linkedin">linkedin.com/in/b-shikhar</a> â€¢
          <a href="https://github.com/winshikhar" target="_blank" rel="noopener noreferrer" data-gtm-event="outbound_click" data-gtm-label="github">github.com/winshikhar</a>
        </div>
      </div>
      <button class="theme-toggle" id="themeToggle" title="Toggle theme" data-gtm-event="theme_toggle">
        <span id="themeIcon">ðŸŒ“</span>
        <span id="themeLabel">Dark</span>
      </button>
    </header>

    <nav class="tabs" role="tablist" aria-label="Navigation">
      <button class="tab" role="tab" aria-selected="true" aria-controls="panel-home" data-target="panel-home">Home</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-aiml" data-target="panel-aiml">AI/ML/GenAI</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-devops" data-target="panel-devops">DevOps Engineer</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-projects" data-target="panel-projects">Projects</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-blog" data-target="panel-blog">Blog</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-resume" data-target="panel-resume">Resume</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-pubs" data-target="panel-pubs">Publications</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-knfl" data-target="panel-knfl">KNFL</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="panel-play" data-target="panel-play">Playground</button>
    </nav>

    <main class="card" id="mainCard">
      <!-- HOME -->
      <section id="panel-home" role="tabpanel" aria-labelledby="tab-home" tabindex="0">
        <div class="grid-2">
          <div>
            <h2>Professional Summary</h2>
            <p class="muted">PhD researcher and engineer with 6+ years in AI/ML, GenAI, DevOps, and secure systems. Specialized in <strong>on-prem LLM deployment</strong>, <strong>RAG</strong>, <strong>edge ML</strong>, and <strong>infrastructure automation</strong>.</p>

            <h3>Key Achievements</h3>
            <ul>
              <li><strong>50% reduction</strong> in LLM costs via on-prem vLLM engine</li>
              <li><strong>66.67% bandwidth savings</strong> in surveillance via event-based ONVIF</li>
              <li>Published <strong>6+ SCIE papers</strong> on IoT/SDN security</li>
              <li>Built industrial ML systems with <strong>70â€“90% less human intervention</strong></li>
            </ul>

            <h3>Technical Skills</h3>
            <div class="skills">
              <span class="chip">Python</span>
              <span class="chip">TensorFlow</span>
              <span class="chip">PyTorch</span>
              <span class="chip">vLLM</span>
              <span class="chip">Whisper</span>
              <span class="chip">Docker</span>
              <span class="chip">Kubernetes</span>
              <span class="chip">Neo4j</span>
              <span class="chip">ChromaDB</span>
              <span class="chip">pgvector</span>
              <span class="chip">Gradio</span>
              <span class="chip">Flask</span>
              <span class="chip">n8n</span>
              <span class="chip">MQTT</span>
              <span class="chip">ONVIF</span>
              <span class="chip">Modbus</span>
              <span class="chip">Raspberry Pi</span>
              <span class="chip">Jetson</span>
              <span class="chip">Proxmox</span>
              <span class="chip">Git</span>
              <span class="chip">Linux</span>
            </div>
          </div>
          <aside style="padding:16px;background:var(--glass);border-radius:10px">
            <h3>Highlights</h3>
            <p class="muted">
              â€¢ PhD (Computer Science), PEC Chandigarh<br/>
              â€¢ GATE-2015 Qualified<br/>
              â€¢ Teaching & mentoring experience<br/>
              â€¢ 6+ SCIE Journal and conference publications<br/>
              â€¢ Edge AI on Jetson/RPi<br/>
              â€¢ On-prem GenAI specialist
            </p>
          </aside>
        </div>
      </section>

      <!-- AI/ML/GENAI -->
      <section id="panel-aiml" role="tabpanel" hidden tabindex="0">
        <h2>AI / ML / GenAI Engineering</h2>
        <p class="muted">Secure, cost-efficient AI systems for real-world deployment.</p>
        <ul>
          <li>Built on-prem LLM inference (vLLM/Flask) â€” <strong>50% cost reduction</strong></li>
          <li>Deployed RAG chatbots with ChromaDB + guardrails against prompt injection</li>
          <li>Real-time voice AI: Whisper STT/TTS + Neo4j for context-aware assistants</li>
          <li>Cardamom segregator with Modbus â€” <strong>70â€“90% human intervention reduction</strong></li>
          <li>Seismic signal classifier (human vs. vehicle) on Jetson</li>
        </ul>
      </section>

      <!-- DEVOPS ENGINEER -->
      <section id="panel-devops" role="tabpanel" hidden tabindex="0">
        <h2>DevOps & Infrastructure Automation</h2>
        <p class="muted">Reliable, secure, and efficient infrastructure for AI/ML workloads.</p>
        <ul>
          <li>Containerized LLM/RAG systems with Docker + security guardrails</li>
          <li>Proxmox with PCIe passthrough for GPU-accelerated ML workloads</li>
          <li>CI/CD pipelines for edge devices (Raspberry Pi, Jetson)</li>
          <li>Bandwidth-optimized surveillance via ONVIF + MQTT</li>
          <li>Git, Linux, Bash automation for reproducible deployments</li>
        </ul>
        <h3>Tools</h3>
        <div class="skills">
          <span class="chip">Docker</span>
          <span class="chip">Kubernetes</span>
          <span class="chip">Proxmox</span>
          <span class="chip">Linux</span>
          <span class="chip">Git</span>
          <span class="chip">Bash</span>
          <span class="chip">MQTT</span>
          <span class="chip">n8n</span>
        </div>
      </section>

      <!-- PROJECTS -->
      <section id="panel-projects" role="tabpanel" hidden tabindex="0">
        <h2>Featured Projects</h2>
        <div class="project-card">
          <div class="project-title">On-Prem RAG Chatbot</div>
          <p>Secure chatbot with ChromaDB, vLLM, and Dockerized guardrails.</p>
        </div>
        <div class="project-card">
          <div class="project-title">Cardamom Segregator</div>
          <p>ML model + Modbus integration. Reduced manual labor by 70â€“90%.</p>
        </div>
        <div class="project-card">
          <div class="project-title">Raspberry Pi DevOps</div>
          <p>Full Docker support on low-power devices. <a href="https://github.com/winshikhar/RaspberryPi-Docker-Tweaks" target="_blank">GitHub</a></p>
        </div>
      </section>

      <!-- BLOG -->
      <section id="panel-blog" role="tabpanel" hidden tabindex="0">
        <h2>Blog & Insights</h2>
        <p class="muted">Technical notes, tutorials, and reflections on AI and infrastructure.</p>
        <div class="blog-post">
          <div class="blog-title">On-Prem LLMs: Cost vs Control</div>
          <p>Why I moved from cloud APIs to self-hosted vLLM â€” and saved 50%.</p>
          <a href="https://github.com/winshikhar/winshikhar.github.io/discussions" target="_blank">Read more on GitHub Discussions â†’</a>
        </div>
        <p><a href="https://github.com/winshikhar/winshikhar.github.io/discussions" target="_blank" class="muted">View all posts on GitHub Discussions</a></p>
      </section>

      <!-- RESUME -->
      <section id="panel-resume" role="tabpanel" hidden tabindex="0">
        <h2>Resume</h2>
        <p class="muted">Download or view my full CV.</p>
        <div id="resumeContainer">
          <div class="loader"></div>
          <div class="pdf-loading">Loading resume...</div>
        </div>
        <p style="margin-top:20px"><a href="resume.pdf" download>Download PDF</a></p>
      </section>

      <!-- PUBLICATIONS -->
      <section id="panel-pubs" role="tabpanel" hidden tabindex="0">
        <h2>Publications</h2>
        <p class="muted">Peer-reviewed research in IoT, SDN, privacy, and secure communications.</p>
        <div class="accordion" id="pubs-accordion">
          <div class="loader"></div>
        </div>
      </section>

      <!-- KNFL -->
      <section id="panel-knfl" role="tabpanel" hidden tabindex="0">
        <h2>KNFL â€” Dice Game</h2>
        <p class="muted">Roll five dice. Special hands: KNFL (all same), street, fullhouse, or stack.</p>
        <div class="knfl">
          <div class="playground" id="knfl-dice" aria-label="Dice results"></div>
          <button class="knfl roll" id="knfl-roll" data-gtm-event="knfl_roll">Roll Dice</button>
          <div class="knfl-score" id="knfl-score"></div>
          <p class="muted" style="margin-top:10px;font-size:0.9rem">KNFL = 500 pts. Rare but accumulates.</p>
        </div>
      </section>

      <!-- PLAYGROUND -->
      <section id="panel-play" role="tabpanel" hidden tabindex="0">
        <h2>Playground</h2>
        <p class="muted">Move your mouse to generate animated particles.</p>
        <canvas id="gameCanvas" aria-label="Interactive particle canvas"></canvas>
        <p class="muted" style="margin-top:10px">Click & hold to alter dynamics.</p>
      </section>
    </main>
  </div>

  <script>
    window.dataLayer = window.dataLayer || [];
    const $ = s => document.querySelector(s);
    const $$ = s => [...document.querySelectorAll(s)];

    // DOM Ready check
    const whenDOMReady = new Promise(resolve => {
      if (document.readyState !== 'loading') resolve();
      else document.addEventListener('DOMContentLoaded', resolve);
    });

    // Theme + Favicon
    const root = document.documentElement;
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    let theme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-theme', theme);
    const favicon = document.getElementById('favicon');
    const updateTheme = () => {
      if (theme === 'light') {
        document.getElementById('themeIcon').textContent = 'â˜€ï¸';
        document.getElementById('themeLabel').textContent = 'Light';
        favicon.href = 'favicon-light.ico';
      } else {
        document.getElementById('themeIcon').textContent = 'ðŸŒ™';
        document.getElementById('themeLabel').textContent = 'Dark';
        favicon.href = 'favicon-dark.ico';
      }
    };
    updateTheme();

    $('#themeToggle').addEventListener('click', () => {
      theme = theme === 'light' ? 'dark' : 'light';
      root.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      updateTheme();
      window.dataLayer.push({event: 'theme_toggle', theme_mode: theme});
    });

    // Tabs
    const tabs = $$('[role="tab"]'), panels = $$('[role="tabpanel"]');
    const activateTab = btn => {
      tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
      panels.forEach(p => p.hidden = true);
      if (!btn) return;
      btn.setAttribute('aria-selected', 'true');
      const id = btn.dataset.target;
      const panel = $(`#${id}`);
      if (panel) { panel.hidden = false; panel.focus(); }
      window.dataLayer.push({event: 'tab_view', tab_name: id});
      
      // Special handling for Resume tab to load PDF
      if (id === 'panel-resume') {
        loadResume();
      }
      
      // Special handling for Publications tab
      if (id === 'panel-pubs') {
        buildPubs();
      }
    };
    $('.tabs').addEventListener('click', e => {
      const btn = e.target.closest('[role="tab"]');
      if (btn) activateTab(btn);
    });
    activateTab($('.tab[aria-selected="true"]'));

    // Outbound events
    document.addEventListener('click', e => {
      const el = e.target.closest('[data-gtm-event]');
      if (el) {
        const event = el.dataset.gtmEvent;
        const label = el.dataset.gtmLabel || el.href || el.textContent;
        window.dataLayer.push({event, link_label: label});
      }
    });

    // Publications (Accordion) - Fixed initialization
    function buildPubs() {
      const el = $('#pubs-accordion');
      if (!el || el.children.length > 1) return; // Already built
      
      // Remove loader
      el.innerHTML = '';
      
      const pubs = [
        {
          title: "There is Mathematics for That! : A Formal Verification of Privacy and Simulative Analysis of Consumer-Centric Content Delivery in IoT",
          authors: "Shikhar Bhardwaj, Sandeep Harit, Shilpa",
          year: 2025,
          venue: "Transactions on Emerging Telecommunications Technologies (SCIE)",
          url: "https://onlinelibrary.wiley.com/doi/10.1002/ett.70059"
        },
        {
          title: "Towards a software-defined networking model for consumer-centric content delivery network for IoT",
          authors: "Shikhar Bhardwaj, Sandeep Harit, Anil Yadav",
          year: 2023,
          venue: "Transactions on Emerging Telecommunications Technologies (SCIE)",
          url: "https://onlinelibrary.wiley.com/doi/abs/10.1002/ett.4903"
        },
        {
          title: "Message Queuing Telemetry Transport - Secure Connection: A Power-efficient Secure Communication",
          authors: "Shikhar Bhardwaj, Sandeep Harit, Shilpa, Darpan Anand",
          year: 2023,
          venue: "International Journal of Sensor Networks (IJSN SCIE)",
          url: "https://doi.org/10.1504/IJSNET.2023.131246"
        },
        {
          title: "SDN-Enabled Secure IoT Architecture Development: A Review",
          authors: "Bhardwaj S., Harit S.",
          year: 2022,
          venue: "Inventive Communication and Computational Technologies (ICICCT). Lecture Notes in Networks and Systems, vol 311. Springer",
          url: "https://doi.org/10.1007/978-981-16-5529-6_47"
        },
        {
          title: "Traceability of Unwitting Disclosure Using Explainable Correlation in Procurement and Supply Chain",
          authors: "Gunjal, H.V.; Ingale, V.; Bhardwaj, S.; Belokar, R.M.",
          year: 2023,
          venue: "Applications of Emerging Technologies and AI/ML Algorithms. ICDAPS 2022. Asset Analytics. Springer",
          url: "https://doi.org/10.1007/978-981-99-1019-9_35"
        },
        {
          title: "Stacking Ensemble-based Automatic Web Page Classification",
          authors: "D. Deeksha, R. Bhatia, S. Bhardwaj, M. Kumar, K. Bhatia and S. S. Gill",
          year: 2021,
          venue: "Fourth International Conference on Computational Intelligence and Communication Technologies (CCICT), IEEE",
          url: "https://doi.org/10.1109/CCICT53244.2021.00042"
        }
      ];
      
      pubs.forEach((p,i) => {
        const item = document.createElement('div');
        item.className = 'acc-item';
        const h = document.createElement('div'); 
        h.className = 'acc-h';
        h.setAttribute('tabindex', '0');
        h.setAttribute('role', 'button');
        h.setAttribute('aria-expanded', 'false');
        h.setAttribute('aria-controls', `pub-panel-${i}`);
        
        const tWrap = document.createElement('div');
        tWrap.className = 'acc-title-wrap';
        
        const title = document.createElement('div');
        title.className = 'pub-title';
        title.textContent = p.title;
        
        const authors = document.createElement('div');
        authors.className = 'pub-authors';
        authors.textContent = `${p.authors} (${p.year})`;
        
        const b = document.createElement('button'); 
        b.className = 'acc-btn'; 
        b.textContent = '+'; 
        b.setAttribute('aria-expanded', 'false'); 
        b.setAttribute('aria-controls', `pub-panel-${i}`);
        
        const panel = document.createElement('div'); 
        panel.className = 'acc-panel'; 
        panel.id = `pub-panel-${i}`;
        panel.setAttribute('aria-hidden', 'true');
        
        const venue = document.createElement('div');
        venue.className = 'pub-venue';
        venue.textContent = p.venue;
        
        const link = document.createElement('a');
        link.className = 'pub-link';
        link.href = p.url.trim();
        link.target = '_blank';
        link.rel = 'noopener noreferrer';
        link.textContent = 'View publication';
        link.addEventListener('click', (e) => {
          e.stopPropagation();
          window.dataLayer.push({
            event: 'publication_click',
            publication_title: p.title,
            publication_url: p.url.trim()
          });
        });
        
        panel.append(venue, link);
        tWrap.append(title, authors);
        h.append(tWrap, b);
        item.append(h, panel);
        
        // Make entire header clickable
        h.addEventListener('click', () => togglePubItem(item, panel, b, h));
        h.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            togglePubItem(item, panel, b, h);
          }
        });
        
        el.append(item);
      });
    }
    
    function togglePubItem(item, panel, button, header) {
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      const newState = !isExpanded;
      
      button.setAttribute('aria-expanded', newState);
      button.textContent = newState ? 'â€“' : '+';
      header.setAttribute('aria-expanded', newState);
      panel.classList.toggle('show', newState);
      panel.setAttribute('aria-hidden', !newState);
    }

    // Load publications on DOM ready
    whenDOMReady.then(() => {
      if ($('#panel-pubs').hidden) {
        // Build the publications structure but keep it hidden
        buildPubs();
      }
    });

    // KNFL
    const roll = $('#knfl-roll'), dice = $('#knfl-dice'), score = $('#knfl-score');
    if (roll) {
      roll.onclick = () => {
        const a = Array(5).fill().map(() => Math.floor(Math.random()*6)+1);
        dice.innerHTML = a.map(n => `<div class="dice" role="img" aria-label="Die showing ${n}">${n}</div>`).join('');
        const s = [...a].sort(), u = [...new Set(s)];
        const knfl = s.every(x=>x===s[0]);
        let ms=1,cur=1;
        for(let i=1;i<u.length;i++){if(u[i]===u[i-1]+1){cur++;ms=Math.max(ms,cur);}else cur=1;}
        const big=ms>=5, lil=ms>=4&&!big;
        const c={};s.forEach(x=>c[x]=(c[x]||0)+1);
        const f=Object.values(c).sort((a,b)=>b-a);
        const fh=f.length===2&&f[0]===3&&f[1]===2;
        let txt,pt;
        if(knfl){txt='KNFL';pt=500;}
        else if(big){txt='Big street';pt=40;}
        else if(lil){txt="Lil' street";pt=30;}
        else if(fh){txt='Fullhouse';pt=25;}
        else{const best=s.reduce((a,b)=>c[a]>c[b]?a:b);pt=best*c[best];txt=`Stack (${c[best]}) of ${best}`;}
        score.textContent = `${txt} â€” ${pt} pts`;
        window.dataLayer.push({event: 'knfl_roll', result: txt, points: pt});
      };
    }

    // Playground with performance optimization
    let pgInit = false;
    let animationFrameId = null;
    let lastMouseMoveTime = 0;
    
    function throttle(func, limit) {
      return function() {
        const now = Date.now();
        if (now - lastMouseMoveTime >= limit) {
          func.apply(this, arguments);
          lastMouseMoveTime = now;
        }
      };
    }
    
    const initPG = () => {
      if (pgInit) return; pgInit = true;
      const c = $('#gameCanvas');
      if (!c) return;
      
      const resizeCanvas = () => {
        const dpr = window.devicePixelRatio || 1;
        const vh = Math.min(window.innerHeight * 0.5, 500);
        c.width = c.offsetWidth * dpr;
        c.height = vh * dpr;
        c.style.height = vh + 'px';
      };
      
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      const ctx = c.getContext('2d');
      const dpr = window.devicePixelRatio || 1;
      ctx.scale(dpr, dpr);
      
      let shapes = [], ang = 0;
      const rand = (min, max) => min + Math.random() * (max - min);
      
      const addShape = (x, y) => {
        shapes.push({
          x, y,
          rad: rand(8, 30),
          vel: {x: rand(-2, 2), y: rand(-1, 4)},
          col: {
            r: 128 + 100 * Math.sin(ang),
            g: 128 + 100 * Math.cos(ang),
            b: 128 - 100 * Math.sin(ang)
          },
          alpha: 1
        });
        ang += 0.1;
      };
      
      const throttledMouseMove = throttle((e) => {
        const r = c.getBoundingClientRect();
        const x = e.clientX - r.left;
        const y = e.clientY - r.top;
        
        if (Math.random() > 0.7) {
          addShape(x, y);
        }
      }, 50);
      
      c.addEventListener('mousemove', throttledMouseMove);
      
      let isMouseDown = false;
      c.addEventListener('mousedown', () => {
        isMouseDown = true;
        document.documentElement.style.cursor = 'grabbing';
      });
      document.addEventListener('mouseup', () => {
        isMouseDown = false;
        document.documentElement.style.cursor = '';
      });
      
      const draw = () => {
        ctx.clearRect(0, 0, c.width, c.height);
        
        // Apply mouse down effect to all shapes
        if (isMouseDown) {
          shapes.forEach(s => {
            s.vel.x += rand(-0.5, 0.5);
            s.vel.y += rand(-0.5, 0.5);
          });
        }
        
        for (let i = shapes.length - 1; i >= 0; i--) {
          const s = shapes[i];
          ctx.beginPath();
          ctx.fillStyle = `rgba(${s.col.r},${s.col.g},${s.col.b},${s.alpha})`;
          ctx.arc(s.x, s.y, s.rad, 0, Math.PI * 2);
          ctx.fill();
          
          s.x += s.vel.x;
          s.y += s.vel.y;
          s.alpha *= 0.98;
          
          // Boundary conditions
          if (s.x < 0 || s.x > c.width) s.vel.x *= -0.8;
          if (s.y < 0 || s.y > c.height) s.vel.y *= -0.8;
          
          if (s.alpha < 0.05) shapes.splice(i, 1);
        }
        
        animationFrameId = requestAnimationFrame(draw);
      };
      
      draw();
    };
    
    // Resume loading with fallback
    function loadResume() {
      const container = $('#resumeContainer');
      if (container.innerHTML.includes('embed')) return;
      
      const embed = document.createElement('embed');
      embed.id = 'resumeViewer';
      embed.src = 'resume.pdf';
      embed.type = 'application/pdf';
      embed.setAttribute('aria-label', 'Resume PDF document');
      
      embed.onerror = () => {
        container.innerHTML = `
          <p class="muted" style="text-align:center;padding:40px;">
            Unable to load resume. Please <a href="resume.pdf" download style="color:var(--accent)">download the PDF</a> instead.
          </p>
        `;
      };
      
      // Replace loader with embed after a short delay for UX
      setTimeout(() => {
        container.innerHTML = '';
        container.appendChild(embed);
      }, 500);
    }
    
    // Initialize components on tab activation
    $('.tabs').addEventListener('click', e => {
      const btn = e.target.closest('[role="tab"]');
      if (btn) {
        const id = btn.dataset.target;
        if (id === 'panel-play' && !pgInit) {
          initPG();
        }
        if (id === 'panel-resume') {
          loadResume();
        }
        if (id === 'panel-pubs' && $('#pubs-accordion').children.length === 1) {
          buildPubs();
        }
      }
    });
  </script>
</body>
</html>
